# Environment Configuration Template for IoT Dashboard
# Copy this file to .env in the respective directories and fill in your values

#===========================================
# Frontend Environment Variables (app/.env)
#===========================================

# WebSocket/MQTT Connection URLs
VITE_WS_URL=ws://localhost:3002
VITE_MQTT_WS_URL=ws://localhost:9001

# Backend API Configuration
VITE_API_BASE_URL=http://localhost:3001/api

# Real-time Connection Settings
VITE_CONNECTION_TIMEOUT=5000
VITE_RECONNECT_INTERVAL=3000
VITE_MAX_RECONNECT_ATTEMPTS=5

# UI Configuration
VITE_APP_TITLE=IoT Dashboard
VITE_TELEMETRY_BUFFER_SIZE=500
VITE_OFFLINE_THRESHOLD=5000

# Development Settings
VITE_DEBUG_MODE=true
VITE_MOCK_MODE=false

#===========================================
# Server Environment Variables (server/.env)  
#===========================================

# Server Configuration
SERVER_PORT=3001
SERVER_HOST=localhost
NODE_ENV=development

# CORS Settings
CORS_ORIGIN=http://localhost:5173

# MQTT Broker Configuration
MQTT_BROKER_URL=mqtt://localhost:1883
MQTT_WS_URL=ws://localhost:9001
MQTT_CLIENT_ID=iot-dashboard-server
MQTT_USERNAME=
MQTT_PASSWORD=

# WebSocket Mock Service
WS_MOCK_PORT=3002
WS_MOCK_HOST=localhost

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=info
DEBUG=false

#===========================================
# MQTT Broker Setup (for reference)
#===========================================

# Mosquitto MQTT Broker
# Install: sudo apt install mosquitto mosquitto-clients
# Config file: /etc/mosquitto/mosquitto.conf
# 
# Add these lines to enable WebSocket:
# listener 1883
# listener 9001
# protocol websockets
# allow_anonymous true
#
# Start: sudo systemctl start mosquitto
# Test: mosquitto_pub -h localhost -t test -m "hello"

#===========================================
# Development Quick Start
#===========================================

# 1. Install and start MQTT broker:
#    Docker: docker run -it -p 1883:1883 -p 9001:9001 eclipse-mosquitto
#    Local: sudo systemctl start mosquitto
#
# 2. Install dependencies:
#    npm install (in root, app/, server/ directories)
#
# 3. Start development servers:
#    npm run dev (in root directory)
#
# 4. Upload ESP32 firmware with WiFi credentials
#
# 5. Open http://localhost:5173 to view dashboard

#===========================================
# Production Environment Variables
#===========================================

# For production deployment, update these values:
# VITE_API_BASE_URL=https://your-api-domain.com/api
# VITE_WS_URL=wss://your-websocket-domain.com
# VITE_MQTT_WS_URL=wss://your-mqtt-domain.com:8084
# SERVER_HOST=0.0.0.0
# NODE_ENV=production
# CORS_ORIGIN=https://your-frontend-domain.com
# MQTT_BROKER_URL=mqtt://your-mqtt-broker.com:1883

#===========================================
# Security Notes
#===========================================

# 1. Never commit .env files to version control
# 2. Use strong passwords for MQTT authentication in production
# 3. Enable SSL/TLS for production MQTT connections
# 4. Configure firewall rules for MQTT ports
# 5. Use environment-specific configurations
# 6. Regularly rotate credentials and API keys